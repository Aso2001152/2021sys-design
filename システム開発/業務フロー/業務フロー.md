```uml
@startuml
 center header <size:15><b>メイン処理</b></size>
 
  opt ログイン
  alt 未登録
  hnote across: ユーザー登録処理
  end
  hnote across: ログイン処理
  end
  
  hnote across: 商品検索処理
  
  opt 商品クリック(詳細表示)
  ユーザー -> Webサーバー : 商品クリック
  Webサーバー -> DBサーバー : 商品照会
  DBサーバー -> Webサーバー : 照会結果
  Webサーバー -> ユーザー : 詳細情報表示

  opt お気に入り商品に追加
  ユーザー -> Webサーバー : お気に入りに追加をクリック
  Webサーバー -> DBサーバー : 商品情報
  DBサーバー -> DBサーバー : 商品照会・お気に入りへの追加
  DBサーバー -> Webサーバー : 照会結果
  Webサーバー -> ユーザー : 追加メッセージの表示
  end

  opt 購入
   opt 未ログイン
     hnote across: ログイン処理
   end
     hnote across: 購入処理
  end

@enduml
```
