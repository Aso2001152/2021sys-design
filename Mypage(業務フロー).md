```uml
@startuml
opt 未登録

ユーザー -> Webサーバー:ユーザー登録
Webサーバー -> DBサーバー:ユーザー登録
DBサーバー -> DBサーバー:登録処理
DBサーバー -> Webサーバー:Webサーバー登録結果

  alt 登録成功
   Webサーバー -> ユーザー:登録メッセージを表示
  else 登録失敗
   Webサーバー -> ユーザー:失敗メッセージを表示
  end
end

opt ログイン処理
ユーザー -> Webサーバー:ログイン
Webサーバー -> DBサーバー:ログイン照会
DBサーバー -> DBサーバー:ログイン処理
DBサーバー -> Webサーバー:認証結果

  alt ログイン成功
    Webサーバー -> ユーザー:ログインメッセージを表示
  else ログイン失敗
    Webサーバー -> ユーザー:失敗メッセージを表示
  end
end

activate ユーザー

ユーザー -> Webサーバー:商品検索
Webサーバー -> DBサーバー:検索処理
DBサーバー -> DBサーバー:検索処理
DBサーバー -> Webサーバー:検索結果
Webサーバー -> ユーザー:検索結果

ユーザー -> Webサーバー:商品選択
Webサーバー -> DBサーバー:選択処理
DBサーバー -> DBサーバー:選択処理
DBサーバー -> Webサーバー:処理結果
Webサーバー -> ユーザー:処理結果

ユーザー -> Webサーバー:商品購入
Webサーバー -> DBサーバー:購入処理
DBサーバー -> DBサーバー:購入処理
DBサーバー -> Webサーバー:購入結果
Webサーバー -> ユーザー:購入結果

opt ログイン中

ユーザー -> Webサーバー:会員情報編集
Webサーバー -> DBサーバー:編集処理
DBサーバー -> DBサーバー:編集処理
DBサーバー -> Webサーバー:編集結果
Webサーバー -> ユーザー:編集結果

ユーザー -> Webサーバー:ログアウト
Webサーバー -> DBサーバー:ログアウト照会
DBサーバー -> DBサーバー:ログアウト処理
DBサーバー -> Webサーバー:ログアウト結果
Webサーバー -> ユーザー:ログアウト

ユーザー -> Webサーバー:退会申請
Webサーバー -> DBサーバー:退会申請照会
DBサーバー -> DBサーバー:退会処理
DBサーバー -> Webサーバー:退会申請結果
Webサーバー -> ユーザー:退会

end

deactivate ユーザー
@enduml
```

